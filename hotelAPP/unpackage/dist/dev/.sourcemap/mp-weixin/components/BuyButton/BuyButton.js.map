{"version":3,"sources":["webpack:///F:/小黄鸭酒店/用户APP端/开发版/hotelAPP/components/BuyButton/BuyButton.vue?1a89","webpack:///F:/小黄鸭酒店/用户APP端/开发版/hotelAPP/components/BuyButton/BuyButton.vue?8c61","webpack:///F:/小黄鸭酒店/用户APP端/开发版/hotelAPP/components/BuyButton/BuyButton.vue?bbd3","webpack:///F:/小黄鸭酒店/用户APP端/开发版/hotelAPP/components/BuyButton/BuyButton.vue?2de3","uni-app:///components/BuyButton/BuyButton.vue","webpack:///F:/小黄鸭酒店/用户APP端/开发版/hotelAPP/components/BuyButton/BuyButton.vue?24ae","webpack:///F:/小黄鸭酒店/用户APP端/开发版/hotelAPP/components/BuyButton/BuyButton.vue?5d20"],"names":["name","data","popupOneShow","paypassword","popupShow","computed","roomId","couponList","roomInfo","serverTime","roomNumber","userName","phone","userInfo","nowTime","nextTime","resideDay","siftCoupon","day","arr","maxCoupon","minus_price","maxPrice","maxItem","totalPrice","methods","verifyForm","flag","submit","res","cancel","settingAffirm","payAffirm","satte","id","couponCode","price","payCode","orderInfo","couponId","comeDate","leaveDate","night","orderCode","setTimeout","uni","url","mounted"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACc;;;AAGtE;AACiL;AACjL,gBAAgB,0LAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AAA+pB,CAAgB,orBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC2CnrB;AAAA;AAAA;AAAA,eACA;EACAA;EACAC;IACA;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC,wDACA,oCACA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;IACA;IACAC;MAAA;IAAA;EACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA,oCACA,oEACA,uFACAC;YACA;YACAC;UACA;QACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;QAAAC;MAAA;MACA;MACA;MACA;QACA;UACAC;UACAC;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;EAAA,EACA;EACAC;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;UACA;UACAC;QACA;MACA;MACA;MACA;QACA;QACAA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IAEA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAC;gBACA;gBACA;gBACA;gBAAA,KACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA,kCACA;cAAA;gBAAA;gBAAA,OAGA;kBAAA5B;gBAAA;cAAA;gBAAA0B;gBACA;gBACA,8CACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MAEA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA,kCACA;cAAA;gBAAA;gBAAA,OAGA;kBAAA7B;gBAAA;cAAA;gBAAA0B;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA,kCACA;cAAA;gBAEAI,WACA;gBAAA;gBAAA,OACA;kBAAAC;gBAAA;cAAA;gBAAAC;gBAAA;gBAAA,OAEA;kBAAAC;gBAAA;cAAA;gBAAAC;gBACA;gBACAC;kBACAhC;kBACA2B;kBACAG;kBACAG;kBACA5B;kBACAD;kBACAE;kBACA4B;kBACAC;kBACAC;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA,6DACA;gBACA;gBACA;gBACA;gBACAC;kBACAC;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;MACA;MACA;QAAAb;MAAA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvOA;AAAA;AAAA;AAAA;AAA0vC,CAAgB,utCAAG,EAAC,C;;;;;;;;;;;ACA9wC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/BuyButton/BuyButton.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./BuyButton.vue?vue&type=template&id=0e05adb6&\"\nvar renderjs\nimport script from \"./BuyButton.vue?vue&type=script&lang=js&\"\nexport * from \"./BuyButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BuyButton.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/BuyButton/BuyButton.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./BuyButton.vue?vue&type=template&id=0e05adb6&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uCodeInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-code-input/u-code-input\" */ \"@/uni_modules/uview-ui/components/u-code-input/u-code-input.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.popupOneShow = false\n    }\n    _vm.e1 = function ($event) {\n      _vm.popupShow = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./BuyButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./BuyButton.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"BuyButton\">\r\n\t\t\t<view class=\"left\">\r\n\t\t\t\t<view class=\"totalPrice\">\r\n\t\t\t\t\t<text>总价</text>\r\n\t\t\t\t\t<text>¥{{totalPrice}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"discounts\">\r\n\t\t\t\t\t<text>已优惠</text>\r\n\t\t\t\t\t<text>¥{{maxCoupon.minus_price}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"right\">\r\n\t\t\t\t<view class=\"detail\">\r\n\t\t\t\t\t<text>明细</text>\r\n\t\t\t\t\t<u-icon name=\"../../static/icon/blackxia.png\"></u-icon>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"submit\" @click=\"submit\">提交订单</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 设置支付密码 -->\r\n\t\t<u-popup :show=\"popupOneShow\" @close=\"popupOneShow=false\" class=\"popup\">\r\n\t\t\t<text class=\"text\">请设置支付密码</text>\r\n\t\t\t<u-code-input class=\"codeInput\" v-model=\"paypassword\" mode=\"box\" dot></u-code-input>\r\n\t\t\t<view class=\"btn\">\r\n\t\t\t\t<button class=\"cancel\" @click=\"cancel\">取消</button>\r\n\t\t\t\t<button class=\"affirm\" @click=\"settingAffirm\">确认</button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t\t<!-- 输入支付密码 -->\r\n\t\t<u-popup :show=\"popupShow\" @close=\"popupShow=false\" class=\"popup\">\r\n\t\t\t<text class=\"text\">请输入支付密码</text>\r\n\t\t\t<u-code-input class=\"codeInput\" v-model=\"paypassword\" mode=\"box\" dot></u-code-input>\r\n\t\t\t<view class=\"btn\">\r\n\t\t\t\t<button class=\"cancel\" @click=\"cancel\">取消</button>\r\n\t\t\t\t<button class=\"affirm\" @click=\"payAffirm\">确认</button>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { mapState, mapGetters } from 'vuex'\r\n\texport default {\r\n\t\tname: \"BuyButton\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 设置支付密码\r\n\t\t\t\tpopupOneShow: false,\r\n\t\t\t\tpaypassword: '',\r\n\t\t\t\tpopupShow: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters(['wallet']),\r\n\t\t\t...mapState({\r\n\t\t\t\t// 映射房间id\r\n\t\t\t\troomId: state => state.order.roomId,\r\n\t\t\t\t// 映射优惠卷列表\r\n\t\t\t\tcouponList: state => state.coupon.couponList,\r\n\t\t\t\t// 房间信息\r\n\t\t\t\troomInfo: state => state.room.roomInfo[0],\r\n\t\t\t\t// 服务器\r\n\t\t\t\tserverTime: state => state.index.serverTime,\r\n\t\t\t\t// 房间数\r\n\t\t\t\troomNumber: state => state.order.roomNumber,\r\n\t\t\t\t// 入住人\r\n\t\t\t\tuserName: state => state.order.userName,\r\n\t\t\t\t// 联系电话\r\n\t\t\t\tphone: state => state.order.phone,\r\n\t\t\t\t// 用户信息\r\n\t\t\t\tuserInfo: state => state.user.userInfo,\r\n\t\t\t\t// 入住时间\r\n\t\t\t\tnowTime: state => state.index.nowTime,\r\n\t\t\t\t// 离店时间\r\n\t\t\t\tnextTime: state => state.index.nextTime,\r\n\t\t\t\t// 入住天数\r\n\t\t\t\tresideDay: state => state.index.resideDay\r\n\t\t\t}),\r\n\t\t\t// 筛选可用的优惠卷\r\n\t\t\tsiftCoupon() {\r\n\t\t\t\tlet arr = []\r\n\t\t\t\t// 遍历所有优惠卷\r\n\t\t\t\tthis.couponList.map(item => {\r\n\t\t\t\t\t// 筛选出可用价格与实际金额相符合的\r\n\t\t\t\t\tif (this.roomInfo.price * this.roomNumber >= item.start_price && item.usable === 0) {\r\n\t\t\t\t\t\t// 将时间分隔成单独的年月日\r\n\t\t\t\t\t\tconst timeArr = item.expire_date.split(\"-\")\r\n\t\t\t\t\t\tconst year = parseInt(timeArr[0])\r\n\t\t\t\t\t\tconst month = parseInt(timeArr[1])\r\n\t\t\t\t\t\tconst day = parseInt(timeArr[2])\r\n\t\t\t\t\t\t// 筛选出未过期的\r\n\t\t\t\t\t\tif (this.serverTime.year < year ||\r\n\t\t\t\t\t\t\t(this.serverTime.year === year && this.serverTime.month < month) ||\r\n\t\t\t\t\t\t\t(this.serverTime.year === year && this.serverTime.month === month && this.serverTime\r\n\t\t\t\t\t\t\t\t.day <= day)) {\r\n\t\t\t\t\t\t\t// 符合条件的添加进变量数组\r\n\t\t\t\t\t\t\tarr.push(item)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// 返回变量数组\r\n\t\t\t\treturn arr\r\n\t\t\t},\r\n\t\t\t// 筛选出最大金额的优惠卷\r\n\t\t\tmaxCoupon() {\r\n\t\t\t\tif (!this.siftCoupon || this.siftCoupon.length === 0) return { minus_price: 0 }\r\n\t\t\t\tlet maxPrice = -Infinity\r\n\t\t\t\tlet maxItem = null\r\n\t\t\t\tthis.siftCoupon.forEach(item => {\r\n\t\t\t\t\tif (item.minus_price > maxPrice) {\r\n\t\t\t\t\t\tmaxPrice = item.minus_price\r\n\t\t\t\t\t\tmaxItem = item\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn maxItem\r\n\t\t\t},\r\n\t\t\t// 总价\r\n\t\t\ttotalPrice() {\r\n\t\t\t\treturn this.roomInfo.price * this.roomNumber - this.maxCoupon.minus_price\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 验证订单信息\r\n\t\t\tverifyForm() {\r\n\t\t\t\tlet flag = true\r\n\t\t\t\t// 判断入住人名字\r\n\t\t\t\tthis.userName.map(item => {\r\n\t\t\t\t\tif (item.length < 2 || item.length > 50) {\r\n\t\t\t\t\t\tthis.$errAlert('入住人姓名错误')\r\n\t\t\t\t\t\tflag = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// 判断联系电话\r\n\t\t\t\tif (this.phone.length != 11) {\r\n\t\t\t\t\tthis.$errAlert('联系电话不合法')\r\n\t\t\t\t\tflag = false\r\n\t\t\t\t}\r\n\t\t\t\treturn flag\r\n\t\t\t},\r\n\t\t\t// 点击提交订单按钮\r\n\t\t\tasync submit() {\r\n\t\t\t\t// 调用验证订单信息函数\r\n\t\t\t\tif (!this.verifyForm()) return false\r\n\t\t\t\t// 派发获取账户是否设置支付密码\r\n\t\t\t\tconst res = await this.$store.dispatch('payPassword')\r\n\t\t\t\t// 未设置支付密码\r\n\t\t\t\tif (!res.data) this.popupOneShow = true\r\n\t\t\t\t// 已设置支付密码\r\n\t\t\t\telse this.popupShow = true\r\n\t\t\t},\r\n\t\t\t// 支付密码的取消按钮\r\n\t\t\tcancel() {\r\n\t\t\t\t// 清空输入的密码\r\n\t\t\t\tthis.paypassword = ''\r\n\t\t\t\t// 隐藏密码输入框\r\n\t\t\t\tthis.popupOneShow = false\r\n\t\t\t\tthis.popupShow = false\r\n\t\t\t},\r\n\t\t\t// 支付密码的确认按钮 \r\n\t\t\tasync settingAffirm() {\r\n\t\t\t\t// 长度验证\r\n\t\t\t\tif (this.paypassword.length != 6) {\r\n\t\t\t\t\tthis.$errAlert('请输入支付密码')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t// 派发修改密码请求\r\n\t\t\t\tconst res = await this.$store.dispatch('changePayPassword', { paypassword: this.paypassword })\r\n\t\t\t\t// 根据请求的结果弹出对应提示框\r\n\t\t\t\tif (res === 200) this.$okAlert('设置成功')\r\n\t\t\t\telse this.$errAlert('设置失败')\r\n\t\t\t\t// 关闭密码输入框\r\n\t\t\t\tthis.cancel()\r\n\t\t\t},\r\n\t\t\t// 输入支付密码\r\n\t\t\tasync payAffirm() {\r\n\t\t\t\t// 长度验证\r\n\t\t\t\tif (this.paypassword.length != 6) {\r\n\t\t\t\t\tthis.$errAlert('请输入支付密码')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t// 派发判断支付密码的请求\r\n\t\t\t\tconst res = await this.$store.dispatch('verifyPayPassword', { paypassword: this.paypassword })\r\n\t\t\t\t// 支付密码错误\r\n\t\t\t\tif (res === 0) {\r\n\t\t\t\t\tthis.$errAlert('密码错误')\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tlet satte = 0\r\n\t\t\t\t// 使用优惠卷\r\n\t\t\t\tconst couponCode = await this.$store.dispatch('useCoupon', { id: this.maxCoupon.id })\r\n\t\t\t\t// 钱包支付\r\n\t\t\t\tconst payCode = await this.$store.dispatch('pay', { price: this.totalPrice })\r\n\t\t\t\tif (payCode.code === 200) satte = 1\r\n\t\t\t\tconst orderInfo = {\r\n\t\t\t\t\troomId: this.roomInfo.id,\r\n\t\t\t\t\tsatte: satte,\r\n\t\t\t\t\tprice: this.totalPrice,\r\n\t\t\t\t\tcouponId: this.maxCoupon.id || 0,\r\n\t\t\t\t\tuserName: this.userName.join(', '),\r\n\t\t\t\t\troomNumber: this.roomNumber || 1,\r\n\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\tcomeDate: JSON.stringify(this.nowTime),\r\n\t\t\t\t\tleaveDate: JSON.stringify(this.nextTime),\r\n\t\t\t\t\tnight: this.resideDay\r\n\t\t\t\t}\r\n\t\t\t\tconst orderCode = await this.$store.dispatch('order', orderInfo)\r\n\t\t\t\tif (payCode.code === 200) this.$okAlert(payCode.data)\r\n\t\t\t\telse if (payCode.code === 201) this.$errAlert(payCode.data)\r\n\t\t\t\t// 关闭密码弹窗\r\n\t\t\t\tthis.cancel()\r\n\t\t\t\t// 跳转到订单页面\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl: '/pages/order/order'\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 1000)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 获取优惠卷列表\r\n\t\t\tthis.$store.dispatch('getCoupon')\r\n\t\t\t// 获取服务器时间\r\n\t\t\tthis.$store.dispatch('getNowTime')\r\n\t\t\t// 获取用户资料\r\n\t\t\tthis.$store.dispatch('getUserInfo').then(() => {\r\n\t\t\t\t// 获取钱包余额\r\n\t\t\t\tthis.$store.dispatch('getWallet', { id: this.userInfo.id })\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.BuyButton {\r\n\t\twidth: 100%;\r\n\t\theight: 150rpx;\r\n\t\tbackground-color: #efefef;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tpadding: 0 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\r\n\t\t.left {\r\n\t\t\t.totalPrice {\r\n\t\t\t\ttext:nth-child(1) {\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttext:nth-child(2) {\r\n\t\t\t\t\tcolor: red;\r\n\t\t\t\t\tfont-size: 40rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tmargin: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.discounts {\r\n\t\t\t\ttext:nth-child(1) {\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttext:nth-child(2) {\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tmargin: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.right {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-right: 20rpx;\r\n\r\n\t\t\t.detail {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.submit {\r\n\t\t\t\tbackground-color: #ff5454;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\twidth: 250rpx;\r\n\t\t\t\tmargin: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t.popup {\r\n\t\ttext-align: center;\r\n\r\n\t\t.text {\r\n\t\t\tfont-weight: bold;\r\n\t\t\tfont-size: 40rpx;\r\n\t\t\tmargin-top: 50rpx;\r\n\t\t}\r\n\r\n\t\t.codeInput {\r\n\t\t\tmargin: 50rpx auto;\r\n\t\t\tpadding: 20rpx;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-bottom: 100rpx;\r\n\r\n\t\t\t.cancel {\r\n\t\t\t\tbackground-color: #ff9c9c;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\twidth: 300rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.affirm {\r\n\t\t\t\tbackground-color: #ff5454;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\twidth: 300rpx;\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./BuyButton.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder X\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./BuyButton.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1712662345791\n      var cssReload = require(\"D:/HBuilder X/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}